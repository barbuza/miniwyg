!function(){var a,b,c;b=function(a){return setTimeout(a,0)},a=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;if(null==a&&(a={}),!this.data("miniwyg")){for(document.execCommand("defaultParagraphSeparator",!1,"p"),j=jQuery('<div class="miniwyg">\n  <div class="panel"></div>\n  <div class="editor" contenteditable spellcheck="false"></div>\n</div>'),k=j.find(".panel:first"),a.fontawesome&&k.addClass("fontawesome"),g=j.find(".editor:first"),g.css("min-height",this.height()),g.html(this.text()),q=["bold","italic","underline"],n=function(b){var c,d,e;return e=b.charAt(0),c=a.fontawesome?jQuery("<span class='icon-"+b+"'></span>"):jQuery("<"+e+">"+e+"</"+e+">"),k.append(c),d=e.toUpperCase().charCodeAt(0),c.mousedown(function(){return document.execCommand(b,!1,null)}),g.keydown(function(a){return a.keyCode===d&&a.metaKey?document.execCommand(b,!1,null):void 0})},o=0,p=q.length;p>o;o++)f=q[o],n(f);return l=function(){return k.addClass("display"),b(function(){return k.addClass("show")})},i=function(){return k.removeClass("show")},jQuery(document.body).mousedown(i),g.mousedown(function(a){return a.stopPropagation()}),e=function(){return jQuery.trim(window.getSelection().toString()).length?l():i()},k.on("transitionend",function(){return k.hasClass("show")?void 0:k.removeClass("display")}),g.mouseup(function(){return b(e)}),g.keyup(e),g.keydown(e),j.css("max-width",this.outerWidth()),m=function(){return r.text(g.html())},h=this.parents("form:first"),h.submit(m),d=[],c=function(){},j.data("unbind",[{target:h,args:["submit",m]},{target:jQuery(document.body),args:["mousedown",i]}]),this.data("miniwyg",j),this.addClass("miniwyg_hidden_textarea"),this.after(j)}},c=function(){var a,b,c,d,e,f,g;if(b=this.data("miniwyg")){for(f=b.data("unbind"),d=0,e=f.length;e>d;d++)g=f[d],c=g.target,a=g.args,c.unbind.apply(c,a);return b.remove(),this.data("miniwyg",null),this.removeClass("miniwyg_hidden_textarea")}},jQuery.fn.miniwyg=function(b){var d,e,f,g,h,i;for(i=function(){switch(b){case"destroy":return{fn:c};case"fontawesome":return{fn:a,args:[{fontawesome:!0}]};default:return{fn:a}}}(),f=i.fn,d=i.args,g=0,h=this.length;h>g;g++)e=this[g],f.apply(jQuery(e),d||[]);return this},jQuery(function(a){return a("textarea[role=miniwyg]").miniwyg(),a("textarea[role=miniwyg_fontawesome]").miniwyg("fontawesome")})}.call(this);